var data = {"nodes": [{"id": 0, "name": "shittyrobots", "size": 45354838}, {"id": 1, "name": "thesuperbowl", "size": 12188532}, {"id": 2, "name": "codes", "size": 39734478}, {"id": 3, "name": "batman", "size": 46287362}, {"id": 4, "name": "irishdrinkingsong", "size": 3809912}, {"id": 5, "name": "realtimeww2", "size": 21559519}, {"id": 6, "name": "3framemovies", "size": 33843513}, {"id": 7, "name": "ucfknights", "size": 5020375}, {"id": 8, "name": "tajikistan", "size": 33261028}, {"id": 9, "name": "endlesswar", "size": 39326842}, {"id": 10, "name": "askgis", "size": 2092902}, {"id": 11, "name": "reds", "size": 37259574}, {"id": 12, "name": "philippines", "size": 28304716}, {"id": 13, "name": "bitcoinmarkets", "size": 26970824}, {"id": 14, "name": "bapcsalesaustralia", "size": 2280698}, {"id": 15, "name": "unisex", "size": 4186249}, {"id": 16, "name": "farsiwizard", "size": 29536411}, {"id": 17, "name": "truetelevision", "size": 47532643}, {"id": 18, "name": "politicalhinduism", "size": 9716318}, {"id": 19, "name": "lasvegasgaymers", "size": 16153976}], "links": [{"source": 0, "target": 9, "similarity": 16}, {"source": 0, "target": 14, "similarity": 10}, {"source": 2, "target": 9, "similarity": 32}, {"source": 2, "target": 13, "similarity": 20}, {"source": 4, "target": 7, "similarity": 16}, {"source": 5, "target": 8, "similarity": 16}, {"source": 5, "target": 9, "similarity": 33}, {"source": 5, "target": 12, "similarity": 20}, {"source": 8, "target": 9, "similarity": 65}, {"source": 8, "target": 10, "similarity": 13}, {"source": 8, "target": 12, "similarity": 100}, {"source": 8, "target": 16, "similarity": 30}, {"source": 8, "target": 18, "similarity": 29}, {"source": 9, "target": 10, "similarity": 13}, {"source": 9, "target": 12, "similarity": 100}, {"source": 9, "target": 13, "similarity": 24}, {"source": 9, "target": 16, "similarity": 24}, {"source": 9, "target": 17, "similarity": 19}, {"source": 9, "target": 18, "similarity": 6}, {"source": 10, "target": 12, "similarity": 23}, {"source": 11, "target": 12, "similarity": 6}, {"source": 12, "target": 16, "similarity": 13}, {"source": 12, "target": 18, "similarity": 10}, {"source": 15, "target": 19, "similarity": 30}]}
//var data = {"nodes": [{"id": 0, "name": "announcements", "size": 36545813}, {"id": 1, "name": "art", "size": 25803627}, {"id": 2, "name": "askreddit", "size": 21461974}, {"id": 3, "name": "askscience", "size": 534898}, {"id": 4, "name": "aww", "size": 17320079}, {"id": 5, "name": "blog", "size": 39267430}, {"id": 6, "name": "books", "size": 43083574}, {"id": 7, "name": "creepy", "size": 39260707}, {"id": 8, "name": "dataisbeautiful", "size": 25008099}, {"id": 9, "name": "diy", "size": 30508888}, {"id": 10, "name": "documentaries", "size": 26197356}, {"id": 11, "name": "earthporn", "size": 11054935}, {"id": 12, "name": "explainlikeimfive", "size": 46852901}, {"id": 13, "name": "funny", "size": 34315710}, {"id": 14, "name": "futurology", "size": 24898102}, {"id": 15, "name": "gadgets", "size": 6311584}, {"id": 16, "name": "gaming", "size": 9880912}, {"id": 17, "name": "getmotivated", "size": 205570}, {"id": 18, "name": "gifs", "size": 38338612}, {"id": 19, "name": "history", "size": 2449460}, {"id": 20, "name": "iama", "size": 21040243}, {"id": 21, "name": "internetisbeautiful", "size": 22593527}, {"id": 22, "name": "jokes", "size": 1053655}, {"id": 23, "name": "lifeprotips", "size": 40027957}, {"id": 24, "name": "listentothis", "size": 27913164}, {"id": 25, "name": "mildlyinteresting", "size": 34601607}, {"id": 26, "name": "movies", "size": 45693112}, {"id": 27, "name": "music", "size": 36170255}, {"id": 28, "name": "news", "size": 28987463}, {"id": 29, "name": "nottheonion", "size": 49253438}, {"id": 30, "name": "oldschoolcool", "size": 10347777}, {"id": 31, "name": "personalfinance", "size": 11293508}, {"id": 32, "name": "philosophy", "size": 12480476}, {"id": 33, "name": "photoshopbattles", "size": 39204569}, {"id": 34, "name": "pics", "size": 35081730}, {"id": 35, "name": "science", "size": 13840583}, {"id": 36, "name": "showerthoughts", "size": 20602866}, {"id": 37, "name": "space", "size": 4053989}, {"id": 38, "name": "sports", "size": 37626098}, {"id": 39, "name": "television", "size": 1488364}, {"id": 40, "name": "tifu", "size": 2290150}, {"id": 41, "name": "todayilearned", "size": 29778461}, {"id": 42, "name": "upliftingnews", "size": 32189890}, {"id": 43, "name": "videos", "size": 1444375}, {"id": 44, "name": "worldnews", "size": 32097138}], "links": [{"source": 0, "target": 4, "similarity": 6}, {"source": 0, "target": 11, "similarity": 13}, {"source": 0, "target": 13, "similarity": 24}, {"source": 0, "target": 22, "similarity": 6}, {"source": 0, "target": 24, "similarity": 10}, {"source": 0, "target": 34, "similarity": 13}, {"source": 1, "target": 2, "similarity": 6}, {"source": 1, "target": 3, "similarity": 10}, {"source": 1, "target": 8, "similarity": 13}, {"source": 1, "target": 9, "similarity": 30}, {"source": 1, "target": 11, "similarity": 31}, {"source": 1, "target": 13, "similarity": 10}, {"source": 1, "target": 14, "similarity": 37}, {"source": 1, "target": 15, "similarity": 37}, {"source": 1, "target": 18, "similarity": 28}, {"source": 1, "target": 19, "similarity": 16}, {"source": 1, "target": 20, "similarity": 10}, {"source": 1, "target": 21, "similarity": 13}, {"source": 1, "target": 26, "similarity": 16}, {"source": 1, "target": 27, "similarity": 13}, {"source": 1, "target": 28, "similarity": 6}, {"source": 1, "target": 30, "similarity": 17}, {"source": 1, "target": 31, "similarity": 6}, {"source": 1, "target": 34, "similarity": 30}, {"source": 1, "target": 37, "similarity": 6}, {"source": 1, "target": 41, "similarity": 16}, {"source": 1, "target": 42, "similarity": 6}, {"source": 1, "target": 43, "similarity": 6}, {"source": 1, "target": 44, "similarity": 10}, {"source": 2, "target": 3, "similarity": 100}, {"source": 2, "target": 4, "similarity": 23}, {"source": 2, "target": 5, "similarity": 6}, {"source": 2, "target": 8, "similarity": 13}, {"source": 2, "target": 9, "similarity": 37}, {"source": 2, "target": 11, "similarity": 40}, {"source": 2, "target": 12, "similarity": 26}, {"source": 2, "target": 13, "similarity": 41}, {"source": 2, "target": 14, "similarity": 29}, {"source": 2, "target": 15, "similarity": 23}, {"source": 2, "target": 16, "similarity": 35}, {"source": 2, "target": 17, "similarity": 28}, {"source": 2, "target": 19, "similarity": 46}, {"source": 2, "target": 20, "similarity": 62}, {"source": 2, "target": 21, "similarity": 16}, {"source": 2, "target": 23, "similarity": 10}, {"source": 2, "target": 24, "similarity": 23}, {"source": 2, "target": 26, "similarity": 13}, {"source": 2, "target": 27, "similarity": 29}, {"source": 2, "target": 28, "similarity": 45}, {"source": 2, "target": 29, "similarity": 6}, {"source": 2, "target": 30, "similarity": 6}, {"source": 2, "target": 31, "similarity": 17}, {"source": 2, "target": 32, "similarity": 100}, {"source": 2, "target": 34, "similarity": 13}, {"source": 2, "target": 35, "similarity": 10}, {"source": 2, "target": 39, "similarity": 20}, {"source": 2, "target": 41, "similarity": 16}, {"source": 2, "target": 42, "similarity": 38}, {"source": 2, "target": 44, "similarity": 100}, {"source": 3, "target": 4, "similarity": 27}, {"source": 3, "target": 5, "similarity": 13}, {"source": 3, "target": 8, "similarity": 38}, {"source": 3, "target": 9, "similarity": 100}, {"source": 3, "target": 11, "similarity": 89}, {"source": 3, "target": 12, "similarity": 31}, {"source": 3, "target": 13, "similarity": 26}, {"source": 3, "target": 14, "similarity": 100}, {"source": 3, "target": 15, "similarity": 34}, {"source": 3, "target": 16, "similarity": 57}, {"source": 3, "target": 17, "similarity": 47}, {"source": 3, "target": 18, "similarity": 17}, {"source": 3, "target": 19, "similarity": 100}, {"source": 3, "target": 20, "similarity": 42}, {"source": 3, "target": 21, "similarity": 35}, {"source": 3, "target": 23, "similarity": 30}, {"source": 3, "target": 24, "similarity": 60}, {"source": 3, "target": 26, "similarity": 27}, {"source": 3, "target": 27, "similarity": 51}, {"source": 3, "target": 28, "similarity": 100}, {"source": 3, "target": 29, "similarity": 27}, {"source": 3, "target": 30, "similarity": 16}, {"source": 3, "target": 31, "similarity": 43}, {"source": 3, "target": 32, "similarity": 100}, {"source": 3, "target": 34, "similarity": 43}, {"source": 3, "target": 35, "similarity": 53}, {"source": 3, "target": 37, "similarity": 19}, {"source": 3, "target": 39, "similarity": 20}, {"source": 3, "target": 41, "similarity": 23}, {"source": 3, "target": 42, "similarity": 49}, {"source": 3, "target": 43, "similarity": 42}, {"source": 3, "target": 44, "similarity": 100}, {"source": 4, "target": 5, "similarity": 25}, {"source": 4, "target": 7, "similarity": 17}, {"source": 4, "target": 8, "similarity": 46}, {"source": 4, "target": 9, "similarity": 54}, {"source": 4, "target": 11, "similarity": 38}, {"source": 4, "target": 12, "similarity": 13}, {"source": 4, "target": 13, "similarity": 100}, {"source": 4, "target": 14, "similarity": 33}, {"source": 4, "target": 15, "similarity": 6}, {"source": 4, "target": 16, "similarity": 32}, {"source": 4, "target": 17, "similarity": 100}, {"source": 4, "target": 18, "similarity": 100}, {"source": 4, "target": 19, "similarity": 31}, {"source": 4, "target": 20, "similarity": 30}, {"source": 4, "target": 21, "similarity": 30}, {"source": 4, "target": 22, "similarity": 64}, {"source": 4, "target": 23, "similarity": 25}, {"source": 4, "target": 24, "similarity": 37}, {"source": 4, "target": 25, "similarity": 20}, {"source": 4, "target": 26, "similarity": 24}, {"source": 4, "target": 27, "similarity": 41}, {"source": 4, "target": 28, "similarity": 100}, {"source": 4, "target": 29, "similarity": 34}, {"source": 4, "target": 30, "similarity": 6}, {"source": 4, "target": 31, "similarity": 35}, {"source": 4, "target": 32, "similarity": 44}, {"source": 4, "target": 33, "similarity": 17}, {"source": 4, "target": 34, "similarity": 100}, {"source": 4, "target": 37, "similarity": 6}, {"source": 4, "target": 39, "similarity": 17}, {"source": 4, "target": 41, "similarity": 63}, {"source": 4, "target": 42, "similarity": 100}, {"source": 4, "target": 43, "similarity": 70}, {"source": 4, "target": 44, "similarity": 100}, {"source": 5, "target": 8, "similarity": 6}, {"source": 5, "target": 11, "similarity": 44}, {"source": 5, "target": 13, "similarity": 100}, {"source": 5, "target": 14, "similarity": 20}, {"source": 5, "target": 17, "similarity": 10}, {"source": 5, "target": 18, "similarity": 25}, {"source": 5, "target": 19, "similarity": 10}, {"source": 5, "target": 20, "similarity": 6}, {"source": 5, "target": 22, "similarity": 45}, {"source": 5, "target": 27, "similarity": 16}, {"source": 5, "target": 28, "similarity": 29}, {"source": 5, "target": 29, "similarity": 20}, {"source": 5, "target": 32, "similarity": 32}, {"source": 5, "target": 33, "similarity": 6}, {"source": 5, "target": 34, "similarity": 43}, {"source": 5, "target": 36, "similarity": 21}, {"source": 5, "target": 39, "similarity": 6}, {"source": 5, "target": 41, "similarity": 13}, {"source": 5, "target": 42, "similarity": 16}, {"source": 5, "target": 43, "similarity": 6}, {"source": 5, "target": 44, "similarity": 39}, {"source": 6, "target": 8, "similarity": 13}, {"source": 6, "target": 11, "similarity": 32}, {"source": 6, "target": 14, "similarity": 31}, {"source": 6, "target": 20, "similarity": 17}, {"source": 6, "target": 26, "similarity": 24}, {"source": 6, "target": 28, "similarity": 13}, {"source": 6, "target": 32, "similarity": 13}, {"source": 6, "target": 37, "similarity": 13}, {"source": 6, "target": 39, "similarity": 26}, {"source": 6, "target": 43, "similarity": 20}, {"source": 7, "target": 11, "similarity": 21}, {"source": 7, "target": 13, "similarity": 23}, {"source": 7, "target": 17, "similarity": 6}, {"source": 7, "target": 19, "similarity": 28}, {"source": 7, "target": 20, "similarity": 17}, {"source": 7, "target": 28, "similarity": 27}, {"source": 7, "target": 32, "similarity": 10}, {"source": 7, "target": 41, "similarity": 16}, {"source": 7, "target": 42, "similarity": 10}, {"source": 7, "target": 44, "similarity": 31}, {"source": 8, "target": 9, "similarity": 60}, {"source": 8, "target": 11, "similarity": 71}, {"source": 8, "target": 13, "similarity": 40}, {"source": 8, "target": 14, "similarity": 99}, {"source": 8, "target": 15, "similarity": 34}, {"source": 8, "target": 16, "similarity": 19}, {"source": 8, "target": 17, "similarity": 34}, {"source": 8, "target": 18, "similarity": 34}, {"source": 8, "target": 19, "similarity": 40}, {"source": 8, "target": 20, "similarity": 37}, {"source": 8, "target": 21, "similarity": 39}, {"source": 8, "target": 22, "similarity": 42}, {"source": 8, "target": 23, "similarity": 25}, {"source": 8, "target": 24, "similarity": 20}, {"source": 8, "target": 26, "similarity": 28}, {"source": 8, "target": 27, "similarity": 24}, {"source": 8, "target": 28, "similarity": 57}, {"source": 8, "target": 29, "similarity": 31}, {"source": 8, "target": 30, "similarity": 6}, {"source": 8, "target": 31, "similarity": 36}, {"source": 8, "target": 32, "similarity": 28}, {"source": 8, "target": 33, "similarity": 13}, {"source": 8, "target": 34, "similarity": 23}, {"source": 8, "target": 35, "similarity": 13}, {"source": 8, "target": 36, "similarity": 17}, {"source": 8, "target": 37, "similarity": 23}, {"source": 8, "target": 39, "similarity": 30}, {"source": 8, "target": 41, "similarity": 30}, {"source": 8, "target": 42, "similarity": 52}, {"source": 8, "target": 43, "similarity": 19}, {"source": 8, "target": 44, "similarity": 90}, {"source": 9, "target": 11, "similarity": 56}, {"source": 9, "target": 12, "similarity": 29}, {"source": 9, "target": 13, "similarity": 37}, {"source": 9, "target": 14, "similarity": 100}, {"source": 9, "target": 15, "similarity": 100}, {"source": 9, "target": 16, "similarity": 23}, {"source": 9, "target": 17, "similarity": 48}, {"source": 9, "target": 18, "similarity": 6}, {"source": 9, "target": 19, "similarity": 41}, {"source": 9, "target": 20, "similarity": 57}, {"source": 9, "target": 21, "similarity": 100}, {"source": 9, "target": 22, "similarity": 10}, {"source": 9, "target": 23, "similarity": 100}, {"source": 9, "target": 24, "similarity": 28}, {"source": 9, "target": 26, "similarity": 36}, {"source": 9, "target": 27, "similarity": 32}, {"source": 9, "target": 28, "similarity": 61}, {"source": 9, "target": 29, "similarity": 50}, {"source": 9, "target": 30, "similarity": 23}, {"source": 9, "target": 31, "similarity": 100}, {"source": 9, "target": 32, "similarity": 43}, {"source": 9, "target": 34, "similarity": 100}, {"source": 9, "target": 35, "similarity": 28}, {"source": 9, "target": 37, "similarity": 29}, {"source": 9, "target": 39, "similarity": 21}, {"source": 9, "target": 41, "similarity": 100}, {"source": 9, "target": 42, "similarity": 76}, {"source": 9, "target": 43, "similarity": 36}, {"source": 9, "target": 44, "similarity": 100}, {"source": 10, "target": 24, "similarity": 6}, {"source": 10, "target": 28, "similarity": 20}, {"source": 10, "target": 44, "similarity": 27}, {"source": 11, "target": 12, "similarity": 6}, {"source": 11, "target": 13, "similarity": 86}, {"source": 11, "target": 14, "similarity": 100}, {"source": 11, "target": 15, "similarity": 33}, {"source": 11, "target": 16, "similarity": 35}, {"source": 11, "target": 17, "similarity": 28}, {"source": 11, "target": 18, "similarity": 51}, {"source": 11, "target": 19, "similarity": 100}, {"source": 11, "target": 20, "similarity": 73}, {"source": 11, "target": 21, "similarity": 36}, {"source": 11, "target": 22, "similarity": 20}, {"source": 11, "target": 23, "similarity": 23}, {"source": 11, "target": 24, "similarity": 26}, {"source": 11, "target": 26, "similarity": 100}, {"source": 11, "target": 27, "similarity": 39}, {"source": 11, "target": 28, "similarity": 100}, {"source": 11, "target": 29, "similarity": 24}, {"source": 11, "target": 30, "similarity": 17}, {"source": 11, "target": 31, "similarity": 40}, {"source": 11, "target": 32, "similarity": 35}, {"source": 11, "target": 33, "similarity": 10}, {"source": 11, "target": 34, "similarity": 100}, {"source": 11, "target": 35, "similarity": 30}, {"source": 11, "target": 36, "similarity": 16}, {"source": 11, "target": 37, "similarity": 25}, {"source": 11, "target": 39, "similarity": 42}, {"source": 11, "target": 41, "similarity": 27}, {"source": 11, "target": 42, "similarity": 48}, {"source": 11, "target": 43, "similarity": 100}, {"source": 11, "target": 44, "similarity": 100}, {"source": 12, "target": 14, "similarity": 17}, {"source": 12, "target": 15, "similarity": 19}, {"source": 12, "target": 16, "similarity": 10}, {"source": 12, "target": 17, "similarity": 28}, {"source": 12, "target": 19, "similarity": 26}, {"source": 12, "target": 21, "similarity": 10}, {"source": 12, "target": 23, "similarity": 10}, {"source": 12, "target": 24, "similarity": 6}, {"source": 12, "target": 27, "similarity": 19}, {"source": 12, "target": 28, "similarity": 20}, {"source": 12, "target": 30, "similarity": 6}, {"source": 12, "target": 31, "similarity": 10}, {"source": 12, "target": 32, "similarity": 29}, {"source": 12, "target": 34, "similarity": 10}, {"source": 12, "target": 39, "similarity": 13}, {"source": 12, "target": 41, "similarity": 6}, {"source": 12, "target": 42, "similarity": 21}, {"source": 12, "target": 44, "similarity": 29}, {"source": 13, "target": 14, "similarity": 31}, {"source": 13, "target": 15, "similarity": 29}, {"source": 13, "target": 16, "similarity": 23}, {"source": 13, "target": 17, "similarity": 48}, {"source": 13, "target": 18, "similarity": 100}, {"source": 13, "target": 19, "similarity": 71}, {"source": 13, "target": 20, "similarity": 48}, {"source": 13, "target": 21, "similarity": 25}, {"source": 13, "target": 22, "similarity": 100}, {"source": 13, "target": 24, "similarity": 21}, {"source": 13, "target": 25, "similarity": 36}, {"source": 13, "target": 26, "similarity": 35}, {"source": 13, "target": 27, "similarity": 51}, {"source": 13, "target": 28, "similarity": 100}, {"source": 13, "target": 29, "similarity": 81}, {"source": 13, "target": 31, "similarity": 17}, {"source": 13, "target": 32, "similarity": 27}, {"source": 13, "target": 33, "similarity": 100}, {"source": 13, "target": 34, "similarity": 100}, {"source": 13, "target": 36, "similarity": 100}, {"source": 13, "target": 38, "similarity": 26}, {"source": 13, "target": 39, "similarity": 38}, {"source": 13, "target": 40, "similarity": 19}, {"source": 13, "target": 41, "similarity": 42}, {"source": 13, "target": 42, "similarity": 100}, {"source": 13, "target": 43, "similarity": 56}, {"source": 13, "target": 44, "similarity": 100}, {"source": 14, "target": 15, "similarity": 100}, {"source": 14, "target": 16, "similarity": 21}, {"source": 14, "target": 17, "similarity": 41}, {"source": 14, "target": 19, "similarity": 34}, {"source": 14, "target": 20, "similarity": 82}, {"source": 14, "target": 21, "similarity": 100}, {"source": 14, "target": 22, "similarity": 10}, {"source": 14, "target": 23, "similarity": 47}, {"source": 14, "target": 24, "similarity": 17}, {"source": 14, "target": 26, "similarity": 100}, {"source": 14, "target": 27, "similarity": 17}, {"source": 14, "target": 28, "similarity": 89}, {"source": 14, "target": 29, "similarity": 37}, {"source": 14, "target": 30, "similarity": 6}, {"source": 14, "target": 31, "similarity": 44}, {"source": 14, "target": 32, "similarity": 94}, {"source": 14, "target": 34, "similarity": 38}, {"source": 14, "target": 35, "similarity": 23}, {"source": 14, "target": 39, "similarity": 100}, {"source": 14, "target": 41, "similarity": 50}, {"source": 14, "target": 42, "similarity": 67}, {"source": 14, "target": 43, "similarity": 42}, {"source": 14, "target": 44, "similarity": 98}, {"source": 15, "target": 16, "similarity": 17}, {"source": 15, "target": 17, "similarity": 6}, {"source": 15, "target": 19, "similarity": 21}, {"source": 15, "target": 20, "similarity": 27}, {"source": 15, "target": 21, "similarity": 80}, {"source": 15, "target": 23, "similarity": 28}, {"source": 15, "target": 26, "similarity": 13}, {"source": 15, "target": 27, "similarity": 10}, {"source": 15, "target": 28, "similarity": 33}, {"source": 15, "target": 29, "similarity": 23}, {"source": 15, "target": 30, "similarity": 17}, {"source": 15, "target": 31, "similarity": 35}, {"source": 15, "target": 32, "similarity": 6}, {"source": 15, "target": 34, "similarity": 27}, {"source": 15, "target": 37, "similarity": 24}, {"source": 15, "target": 39, "similarity": 17}, {"source": 15, "target": 41, "similarity": 25}, {"source": 15, "target": 42, "similarity": 32}, {"source": 15, "target": 43, "similarity": 13}, {"source": 15, "target": 44, "similarity": 39}, {"source": 16, "target": 17, "similarity": 35}, {"source": 16, "target": 19, "similarity": 29}, {"source": 16, "target": 20, "similarity": 25}, {"source": 16, "target": 21, "similarity": 16}, {"source": 16, "target": 22, "similarity": 6}, {"source": 16, "target": 24, "similarity": 52}, {"source": 16, "target": 26, "similarity": 27}, {"source": 16, "target": 27, "similarity": 100}, {"source": 16, "target": 28, "similarity": 57}, {"source": 16, "target": 31, "similarity": 29}, {"source": 16, "target": 32, "similarity": 35}, {"source": 16, "target": 34, "similarity": 37}, {"source": 16, "target": 39, "similarity": 60}, {"source": 16, "target": 41, "similarity": 21}, {"source": 16, "target": 42, "similarity": 44}, {"source": 16, "target": 43, "similarity": 13}, {"source": 16, "target": 44, "similarity": 100}, {"source": 17, "target": 18, "similarity": 84}, {"source": 17, "target": 19, "similarity": 28}, {"source": 17, "target": 20, "similarity": 27}, {"source": 17, "target": 21, "similarity": 34}, {"source": 17, "target": 22, "similarity": 20}, {"source": 17, "target": 23, "similarity": 82}, {"source": 17, "target": 24, "similarity": 55}, {"source": 17, "target": 25, "similarity": 17}, {"source": 17, "target": 26, "similarity": 6}, {"source": 17, "target": 27, "similarity": 54}, {"source": 17, "target": 28, "similarity": 76}, {"source": 17, "target": 29, "similarity": 36}, {"source": 17, "target": 31, "similarity": 74}, {"source": 17, "target": 32, "similarity": 55}, {"source": 17, "target": 33, "similarity": 19}, {"source": 17, "target": 34, "similarity": 35}, {"source": 17, "target": 35, "similarity": 21}, {"source": 17, "target": 37, "similarity": 6}, {"source": 17, "target": 41, "similarity": 49}, {"source": 17, "target": 42, "similarity": 100}, {"source": 17, "target": 43, "similarity": 27}, {"source": 17, "target": 44, "similarity": 77}, {"source": 18, "target": 19, "similarity": 6}, {"source": 18, "target": 20, "similarity": 13}, {"source": 18, "target": 22, "similarity": 46}, {"source": 18, "target": 24, "similarity": 24}, {"source": 18, "target": 25, "similarity": 21}, {"source": 18, "target": 26, "similarity": 21}, {"source": 18, "target": 27, "similarity": 27}, {"source": 18, "target": 28, "similarity": 42}, {"source": 18, "target": 29, "similarity": 31}, {"source": 18, "target": 30, "similarity": 6}, {"source": 18, "target": 32, "similarity": 19}, {"source": 18, "target": 33, "similarity": 43}, {"source": 18, "target": 34, "similarity": 34}, {"source": 18, "target": 36, "similarity": 37}, {"source": 18, "target": 39, "similarity": 46}, {"source": 18, "target": 40, "similarity": 10}, {"source": 18, "target": 41, "similarity": 38}, {"source": 18, "target": 42, "similarity": 100}, {"source": 18, "target": 43, "similarity": 17}, {"source": 18, "target": 44, "similarity": 42}, {"source": 19, "target": 20, "similarity": 74}, {"source": 19, "target": 21, "similarity": 30}, {"source": 19, "target": 22, "similarity": 13}, {"source": 19, "target": 24, "similarity": 35}, {"source": 19, "target": 26, "similarity": 40}, {"source": 19, "target": 27, "similarity": 32}, {"source": 19, "target": 28, "similarity": 100}, {"source": 19, "target": 29, "similarity": 29}, {"source": 19, "target": 31, "similarity": 39}, {"source": 19, "target": 32, "similarity": 74}, {"source": 19, "target": 34, "similarity": 37}, {"source": 19, "target": 35, "similarity": 6}, {"source": 19, "target": 39, "similarity": 24}, {"source": 19, "target": 41, "similarity": 26}, {"source": 19, "target": 42, "similarity": 100}, {"source": 19, "target": 43, "similarity": 27}, {"source": 19, "target": 44, "similarity": 100}, {"source": 20, "target": 21, "similarity": 44}, {"source": 20, "target": 23, "similarity": 13}, {"source": 20, "target": 24, "similarity": 21}, {"source": 20, "target": 25, "similarity": 6}, {"source": 20, "target": 26, "similarity": 60}, {"source": 20, "target": 27, "similarity": 33}, {"source": 20, "target": 28, "similarity": 100}, {"source": 20, "target": 29, "similarity": 37}, {"source": 20, "target": 31, "similarity": 45}, {"source": 20, "target": 32, "similarity": 37}, {"source": 20, "target": 34, "similarity": 23}, {"source": 20, "target": 37, "similarity": 23}, {"source": 20, "target": 39, "similarity": 100}, {"source": 20, "target": 41, "similarity": 38}, {"source": 20, "target": 42, "similarity": 100}, {"source": 20, "target": 43, "similarity": 29}, {"source": 20, "target": 44, "similarity": 100}, {"source": 21, "target": 22, "similarity": 20}, {"source": 21, "target": 23, "similarity": 25}, {"source": 21, "target": 24, "similarity": 17}, {"source": 21, "target": 26, "similarity": 17}, {"source": 21, "target": 27, "similarity": 17}, {"source": 21, "target": 28, "similarity": 55}, {"source": 21, "target": 29, "similarity": 44}, {"source": 21, "target": 30, "similarity": 6}, {"source": 21, "target": 31, "similarity": 39}, {"source": 21, "target": 32, "similarity": 23}, {"source": 21, "target": 34, "similarity": 25}, {"source": 21, "target": 36, "similarity": 13}, {"source": 21, "target": 37, "similarity": 21}, {"source": 21, "target": 39, "similarity": 10}, {"source": 21, "target": 41, "similarity": 28}, {"source": 21, "target": 42, "similarity": 100}, {"source": 21, "target": 43, "similarity": 16}, {"source": 21, "target": 44, "similarity": 94}, {"source": 22, "target": 24, "similarity": 10}, {"source": 22, "target": 27, "similarity": 39}, {"source": 22, "target": 28, "similarity": 31}, {"source": 22, "target": 29, "similarity": 65}, {"source": 22, "target": 33, "similarity": 24}, {"source": 22, "target": 34, "similarity": 33}, {"source": 22, "target": 36, "similarity": 62}, {"source": 22, "target": 39, "similarity": 20}, {"source": 22, "target": 41, "similarity": 19}, {"source": 22, "target": 42, "similarity": 45}, {"source": 22, "target": 43, "similarity": 13}, {"source": 22, "target": 44, "similarity": 39}, {"source": 23, "target": 24, "similarity": 6}, {"source": 23, "target": 28, "similarity": 25}, {"source": 23, "target": 29, "similarity": 16}, {"source": 23, "target": 30, "similarity": 6}, {"source": 23, "target": 31, "similarity": 49}, {"source": 23, "target": 32, "similarity": 28}, {"source": 23, "target": 34, "similarity": 19}, {"source": 23, "target": 35, "similarity": 6}, {"source": 23, "target": 37, "similarity": 13}, {"source": 23, "target": 41, "similarity": 20}, {"source": 23, "target": 42, "similarity": 37}, {"source": 23, "target": 43, "similarity": 6}, {"source": 23, "target": 44, "similarity": 33}, {"source": 24, "target": 26, "similarity": 26}, {"source": 24, "target": 27, "similarity": 100}, {"source": 24, "target": 28, "similarity": 48}, {"source": 24, "target": 29, "similarity": 26}, {"source": 24, "target": 31, "similarity": 30}, {"source": 24, "target": 32, "similarity": 38}, {"source": 24, "target": 34, "similarity": 27}, {"source": 24, "target": 39, "similarity": 29}, {"source": 24, "target": 41, "similarity": 28}, {"source": 24, "target": 42, "similarity": 100}, {"source": 24, "target": 43, "similarity": 24}, {"source": 24, "target": 44, "similarity": 100}, {"source": 25, "target": 33, "similarity": 17}, {"source": 25, "target": 40, "similarity": 6}, {"source": 25, "target": 42, "similarity": 21}, {"source": 26, "target": 27, "similarity": 34}, {"source": 26, "target": 28, "similarity": 60}, {"source": 26, "target": 31, "similarity": 6}, {"source": 26, "target": 32, "similarity": 32}, {"source": 26, "target": 34, "similarity": 88}, {"source": 26, "target": 37, "similarity": 26}, {"source": 26, "target": 39, "similarity": 100}, {"source": 26, "target": 41, "similarity": 16}, {"source": 26, "target": 42, "similarity": 34}, {"source": 26, "target": 43, "similarity": 31}, {"source": 26, "target": 44, "similarity": 57}, {"source": 27, "target": 28, "similarity": 75}, {"source": 27, "target": 29, "similarity": 24}, {"source": 27, "target": 30, "similarity": 6}, {"source": 27, "target": 31, "similarity": 27}, {"source": 27, "target": 32, "similarity": 35}, {"source": 27, "target": 34, "similarity": 54}, {"source": 27, "target": 36, "similarity": 10}, {"source": 27, "target": 39, "similarity": 82}, {"source": 27, "target": 41, "similarity": 31}, {"source": 27, "target": 42, "similarity": 93}, {"source": 27, "target": 43, "similarity": 29}, {"source": 27, "target": 44, "similarity": 100}, {"source": 28, "target": 29, "similarity": 56}, {"source": 28, "target": 31, "similarity": 67}, {"source": 28, "target": 32, "similarity": 72}, {"source": 28, "target": 34, "similarity": 100}, {"source": 28, "target": 35, "similarity": 6}, {"source": 28, "target": 36, "similarity": 6}, {"source": 28, "target": 37, "similarity": 24}, {"source": 28, "target": 39, "similarity": 100}, {"source": 28, "target": 41, "similarity": 62}, {"source": 28, "target": 42, "similarity": 100}, {"source": 28, "target": 43, "similarity": 34}, {"source": 28, "target": 44, "similarity": 100}, {"source": 29, "target": 31, "similarity": 32}, {"source": 29, "target": 32, "similarity": 20}, {"source": 29, "target": 34, "similarity": 30}, {"source": 29, "target": 36, "similarity": 19}, {"source": 29, "target": 37, "similarity": 6}, {"source": 29, "target": 39, "similarity": 17}, {"source": 29, "target": 41, "similarity": 38}, {"source": 29, "target": 42, "similarity": 69}, {"source": 29, "target": 43, "similarity": 17}, {"source": 29, "target": 44, "similarity": 100}, {"source": 30, "target": 34, "similarity": 23}, {"source": 30, "target": 41, "similarity": 29}, {"source": 30, "target": 42, "similarity": 6}, {"source": 31, "target": 32, "similarity": 37}, {"source": 31, "target": 34, "similarity": 30}, {"source": 31, "target": 35, "similarity": 17}, {"source": 31, "target": 39, "similarity": 13}, {"source": 31, "target": 40, "similarity": 6}, {"source": 31, "target": 41, "similarity": 37}, {"source": 31, "target": 42, "similarity": 53}, {"source": 31, "target": 43, "similarity": 23}, {"source": 31, "target": 44, "similarity": 100}, {"source": 32, "target": 34, "similarity": 17}, {"source": 32, "target": 35, "similarity": 13}, {"source": 32, "target": 37, "similarity": 23}, {"source": 32, "target": 39, "similarity": 28}, {"source": 32, "target": 41, "similarity": 29}, {"source": 32, "target": 42, "similarity": 53}, {"source": 32, "target": 43, "similarity": 19}, {"source": 32, "target": 44, "similarity": 88}, {"source": 33, "target": 34, "similarity": 13}, {"source": 33, "target": 36, "similarity": 20}, {"source": 33, "target": 41, "similarity": 10}, {"source": 33, "target": 42, "similarity": 23}, {"source": 34, "target": 35, "similarity": 19}, {"source": 34, "target": 36, "similarity": 16}, {"source": 34, "target": 39, "similarity": 32}, {"source": 34, "target": 41, "similarity": 73}, {"source": 34, "target": 42, "similarity": 69}, {"source": 34, "target": 43, "similarity": 100}, {"source": 34, "target": 44, "similarity": 100}, {"source": 35, "target": 42, "similarity": 19}, {"source": 35, "target": 43, "similarity": 19}, {"source": 35, "target": 44, "similarity": 21}, {"source": 36, "target": 39, "similarity": 6}, {"source": 36, "target": 42, "similarity": 6}, {"source": 36, "target": 44, "similarity": 20}, {"source": 37, "target": 39, "similarity": 27}, {"source": 37, "target": 41, "similarity": 17}, {"source": 37, "target": 42, "similarity": 6}, {"source": 37, "target": 43, "similarity": 16}, {"source": 37, "target": 44, "similarity": 25}, {"source": 38, "target": 44, "similarity": 13}, {"source": 39, "target": 41, "similarity": 17}, {"source": 39, "target": 42, "similarity": 37}, {"source": 39, "target": 43, "similarity": 27}, {"source": 39, "target": 44, "similarity": 88}, {"source": 40, "target": 42, "similarity": 17}, {"source": 40, "target": 44, "similarity": 6}, {"source": 41, "target": 42, "similarity": 63}, {"source": 41, "target": 43, "similarity": 20}, {"source": 41, "target": 44, "similarity": 64}, {"source": 42, "target": 43, "similarity": 38}, {"source": 42, "target": 44, "similarity": 100}, {"source": 43, "target": 44, "similarity": 66}]}

function calculateInsularity(d) {

    var totalSubreddits = d.nodes.length;
    var totalLinks = d.links.length;
    var totalSimilarity = 0;

    for (var i in d.links) {
        totalSimilarity += d.links[i].similarity;
    }

    var AverageLinkSimilarity = (totalSimilarity/totalLinks);

    return (totalLinks/totalSubreddits) * AverageLinkSimilarity
}

var insularity = calculateInsularity(data)
var height = 500
var width = 500
var r = 10

var svg = d3.select("#DataVis")
    .append("svg")
    .attr("width", width)
    .attr("height", height)
    .attr("transform", "translate(100, 100)")
    //.style("border", "1px solid #ADD8E6")

svg.append("text")
    .attr("x", (width / 2))             
    .attr("y", (10))
    .attr("text-anchor", "middle")  
    .style("font-size", "10px") 
    .text("You are " + insularity + "% insulated");

// svg.append("rect")
//     .attr("width", "100%")
//     .attr("height", "100%")
//     .attr("fill", "#ADD8E6");

// var tooltip = d3.select("#DataVis")
//     .append("div")					
//     .style("opacity", 0)
//     .attr("class", "tooltip");

var simulation = d3
    .forceSimulation(data.nodes)
    .force("link", d3.forceLink(data.links)
        .id(function(d) { return d.id; })
        .distance( function(d) {return (150 - d.similarity); } ))
    .force("charge", d3.forceManyBody().strength(-30))
    .force("center", d3.forceCenter(height/2, width/2))
    .force("collide", d3.forceCollide().radius(5))
    .on("tick", ticked);

var showSims = function(d) {
    simValues
        .style("visibility", "visible")
}

var hideSims = function(d) {
    simValues
        .style("visibility", "hidden")
}

var showNodeNames = function(d) {
    d3.select(this)
      .style("stroke", "black")
      .style("opacity", 1)
    nodeNames
        .style("visibility", "visible")
}

var hideNodeNames = function(d) {
    d3.select(this)
      .style("stroke", "none")
      .style("opacity", 1)
    nodeNames
        .style("visibility", "hidden")
}

var nodeNames = svg.append('g')
    .selectAll('text')
    .data(data.nodes)
    .join('text')
      .text(d => d.name)
      .attr('font-size', 8)
      .attr("text-anchor", "middle")

var simValues = svg.append('g')
    .selectAll('line')
    .data(data.links)
    .join('text')
        .text(d => d.similarity/100)
        .attr('font-size', 8)
        .attr("font-weight", "bold")
        .attr("text-anchor", "bottom")
        .style("fill", "black")

var links = svg
    .append("g")
    .selectAll("line")
    .data(data.links)
    .enter()
    .append("line")
    .attr("stroke-width", 1)
    .style("stroke", "black")
    .style("stroke-linecap", "round")
    .style("opacity", function(d) {return d.similarity/100})
    .on("mouseover", showSims)
    .on("mouseleave", hideSims)

var nodes = svg
    .append("g")
    .selectAll("circle")
    .data(data.nodes)
    .enter()
    .append("circle")
    .attr("r", r)
    .attr("fill", "#ff6961")
    .on("mouseover", showNodeNames)
    .on("mouseleave", hideNodeNames)
    .call(drag(simulation));

function ticked() {
    nodes
        .attr("cx", function(d) {
            return d.x = Math.max((r+1), Math.min(width - (r+1), d.x));
        })
        .attr("cy", function(d) {
            return d.y = Math.max((r+1), Math.min(height - (r+1), d.y));
        })
    
    links
        .attr("x1", function(d) {
            return d.source.x;
        })
        .attr("y1", function(d) {
            return d.source.y;
        })
        .attr("x2", function(d) {
            return d.target.x;
        })
        .attr("y2", function(d) {
            return d.target.y;
        })
    
    nodeNames
        .attr("x", function(d) {
            return d.x
        })
        .attr("y", function(d) {
            return d.y + r + 8
        })
        .attr("visibility", "hidden")

    simValues
        .attr("x", function(d) {
            if (Math.abs(d.target.y - d.source.y) > (150 - d.similarity)/0.5) {
                return d.source.x + (d.target.x - d.source.x)/2 + 7;
            } 
            else {
                return d.source.x + (d.target.x - d.source.x)/2;
            }
        })
        .attr("y", function(d) {
            if (Math.abs(d.target.y - d.source.y) < (150 - d.similarity)/0.5) {
                return d.source.y + (d.target.y - d.source.y)/2 + 7;
            } 
            else {
                return d.source.y + (d.target.y - d.source.y)/2;
            }
        })
        .attr("visibility", "hidden")
}

function drag(simulation) {    
    function dragstarted(event) {
        if (!event.active) simulation.alphaTarget(0.3).restart();
        event.subject.fx = event.subject.x;
        event.subject.fy = event.subject.y;
    }
    
    function dragged(event) {
        event.subject.fx = event.x;
        event.subject.fy = event.y;
    }
    
    function dragended(event) {
        if (!event.active) simulation.alphaTarget(0);
        event.subject.fx = null;
        event.subject.fy = null;
    }
    
    return d3.drag()
        .on("start", dragstarted)
        .on("drag", dragged)
        .on("end", dragended);
  }
